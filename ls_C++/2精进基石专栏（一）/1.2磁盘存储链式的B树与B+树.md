##### 2022/10/26

## 多叉树

优点：降低层高，使得结点数量变少，查找次数变少。

### 多叉树与 B 树之间的关系

+ 多叉树没有约束平衡
+ 多叉树没有约束每个结点子树的数量
+ 数据是有规律的

### B 树和 B+ 树区别

+ B+ 树所有数据存储到叶子结点
+ B+ 树所有的叶子结点通过前后指针链接。

### B 树条件

![image-20221026202907383](https://jzh119.oss-cn-beijing.aliyuncs.com/img/image-20221026202907383.png)

### B 树添加 --> 分裂

+ 找到对应的结点，并且未满
+ 找到的结点已满
  + 找到内结点已满，内结点分裂
  + 找叶子结点已满，叶子结点分裂

参考图：

![image-20221026212126607](https://jzh119.oss-cn-beijing.aliyuncs.com/img/image-20221026212126607.png)

> 主要理解添加的过程，代码有点难理解

### B 树删除 --> 合并

判断出子树 key 数量 M / 2 - 1

+ 相邻两颗子树都是 M / 2 - 1， 合并
+ 左子树大于 M / 2 - 1，借结点 
+ 右子树大于 M / 2 - 1，借结点 

三种情况： 合并，借位，直接删除

#### B树线程安全？

+ 锁 root

+ 锁 子树



**主要理解 B 树 和 B+ 树原理**， B+ 树的使用场景











